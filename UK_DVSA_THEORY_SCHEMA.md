# üá¨üáß UK DVSA THEORY TESTING & DRIVING SIMULATOR SCHEMA
## Complete Database Design for UK Driving Platform

### üìö OFFICIAL UK DVSA THEORY TEST TOPICS

#### **1Ô∏è‚É£ Core Theory Categories (Official DVSA)**
```sql
theory_categories:
- 'ALERTNESS' ‚Üí Awareness and anticipation
- 'ATTITUDE' ‚Üí Courtesy, consideration, and road rage
- 'SAFETY_AND_YOUR_VEHICLE' ‚Üí Fault detection, defects, safety equipment, emissions
- 'SAFETY_MARGINS' ‚Üí Stopping distances, speed limits, weather conditions
- 'HAZARD_AWARENESS' ‚Üí Static and developing hazards, environmental factors
- 'VULNERABLE_ROAD_USERS' ‚Üí Pedestrians, cyclists, motorcyclists, horse riders
- 'OTHER_TYPES_OF_VEHICLE' ‚Üí Motorcycles, lorries, buses, emergency vehicles
- 'VEHICLE_SAFETY' ‚Üí Seat belts, head restraints, children in vehicles
- 'VEHICLE_LOADING' ‚Üí Principles of loading, roof racks, trailers
- 'INCIDENTS_ACCIDENTS_EMERGENCIES' ‚Üí Breakdowns, accidents, first aid
- 'VEHICLE_HANDLING' ‚Üí Weather conditions, time of day, vehicle characteristics
- 'MOTORWAY_RULES' ‚Üí Speed limits, lane discipline, stopping, parking
- 'RULES_OF_THE_ROAD' ‚Üí Speed limits, stopping procedures, lighting requirements
- 'ROAD_AND_TRAFFIC_SIGNS' ‚Üí Warning signs, regulatory signs, information signs
- 'DOCUMENTS' ‚Üí Licence requirements, insurance, MOT, registration documents
```

#### **2Ô∏è‚É£ Hazard Perception Test Components**
```sql
hazard_perception_categories:
- 'DEVELOPING_HAZARDS' ‚Üí Situations that may require driver response
- 'STATIC_HAZARDS' ‚Üí Parked cars, road works, sharp bends
- 'MOVING_HAZARDS' ‚Üí Other vehicles, pedestrians, cyclists
- 'ENVIRONMENTAL_HAZARDS' ‚Üí Weather, road surface, visibility
- 'BEHAVIORAL_HAZARDS' ‚Üí Aggressive drivers, impaired drivers
```

#### **3Ô∏è‚É£ Active Driving Simulator Scenarios**
```sql
simulator_scenarios:
- 'URBAN_DRIVING' ‚Üí City center navigation, pedestrian areas
- 'RURAL_DRIVING' ‚Üí Country roads, single track roads, farm vehicles  
- 'MOTORWAY_DRIVING' ‚Üí Joining, leaving, lane changing, services
- 'NIGHT_DRIVING' ‚Üí Reduced visibility, headlight use, fatigue
- 'ADVERSE_WEATHER' ‚Üí Rain, snow, ice, fog, wind
- 'EMERGENCY_SITUATIONS' ‚Üí Breakdown procedures, accident response
- 'PARKING_MANEUVERS' ‚Üí Parallel, bay, reverse, hill starts
- 'ROUNDABOUTS' ‚Üí Mini, large, multi-lane, traffic lights
- 'DUAL_CARRIAGEWAYS' ‚Üí Overtaking, slip roads, speed management
- 'SCHOOL_ZONES' ‚Üí Speed limits, crossing patrols, children
```

---

## üöó UK-SPECIFIC INSTRUCTOR DATABASE SCHEMA

### **Enhanced Instructors Table (UK-Focused)**
```sql
instructors (UK Driving Instructors):
- id (PK)
- user_id (FK) ‚Üí users
- adi_badge_number (VARCHAR) ‚Üí Approved Driving Instructor number
- adi_grade (ENUM) ‚Üí 'grade_4', 'grade_5', 'grade_6' (DVSA grading)
- years_experience (INTEGER) ‚Üí Total teaching years
- hourly_rate (DECIMAL) ‚Üí ¬£ per hour
- specialities (JSON) ‚Üí ['manual', 'automatic', 'intensive', 'test_prep', 'refresher', 'nervous_drivers', 'elderly_drivers']
- instructor_summary (TEXT) ‚Üí Professional bio/description
- weekly_availability (JSON) ‚Üí Detailed schedule per day
- base_city (VARCHAR) ‚Üí Primary operating city
- coverage_areas (JSON) ‚Üí Array of postcodes/areas covered
- whatsapp_number (VARCHAR) ‚Üí WhatsApp contact
- ethnicity (VARCHAR) ‚Üí For matching preferences
- religion (VARCHAR) ‚Üí For cultural considerations  
- car_make (VARCHAR) ‚Üí Vehicle manufacturer
- car_model (VARCHAR) ‚Üí Vehicle model
- car_year (INTEGER) ‚Üí Vehicle year
- car_transmission (ENUM) ‚Üí 'manual', 'automatic', 'both'
- car_fuel_type (ENUM) ‚Üí 'petrol', 'diesel', 'hybrid', 'electric'
- dual_controls (BOOLEAN) ‚Üí Safety equipment
- vehicle_registration (VARCHAR) ‚Üí UK reg number
- insurance_valid_until (DATE) ‚Üí Coverage expiry
- mot_valid_until (DATE) ‚Üí MOT certificate expiry
- is_female_instructor (BOOLEAN) ‚Üí For student preferences
- languages_spoken (JSON) ‚Üí ['english', 'urdu', 'hindi', 'polish', etc.]
- emergency_contact (JSON) ‚Üí Name, phone, relationship
```

---

## üìÖ COMPREHENSIVE CALENDAR & DIARY SYSTEM

### **1Ô∏è‚É£ Instructor Calendar Tables**
```sql
instructor_calendars (Master Calendar):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- calendar_name (VARCHAR) ‚Üí "Main Schedule", "Holiday Calendar"
- is_default (BOOLEAN)
- timezone (VARCHAR) ‚Üí 'Europe/London'
- color_code (VARCHAR) ‚Üí UI calendar color
- is_public (BOOLEAN) ‚Üí Student visibility
- created_at, updated_at

instructor_availability_templates (Weekly Templates):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- template_name (VARCHAR) ‚Üí "Summer Schedule", "Winter Schedule"
- monday_start (TIME), monday_end (TIME), monday_available (BOOLEAN)
- tuesday_start (TIME), tuesday_end (TIME), tuesday_available (BOOLEAN)
- wednesday_start (TIME), wednesday_end (TIME), wednesday_available (BOOLEAN)
- thursday_start (TIME), thursday_end (TIME), thursday_available (BOOLEAN)
- friday_start (TIME), friday_end (TIME), friday_available (BOOLEAN)
- saturday_start (TIME), saturday_end (TIME), saturday_available (BOOLEAN)
- sunday_start (TIME), sunday_end (TIME), sunday_available (BOOLEAN)
- break_times (JSON) ‚Üí Array of lunch/break periods
- is_active (BOOLEAN)

instructor_availability_overrides (Specific Date Changes):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- override_date (DATE)
- is_available (BOOLEAN)
- start_time (TIME)
- end_time (TIME)
- reason (VARCHAR) ‚Üí 'holiday', 'sick', 'training', 'personal'
- notes (TEXT)

instructor_time_blocks (Detailed Time Management):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- block_date (DATE)
- start_time (TIME)
- end_time (TIME)
- block_type (ENUM) ‚Üí 'lesson', 'break', 'admin', 'travel', 'unavailable'
- booking_id (FK) ‚Üí bookings (if lesson)
- status (ENUM) ‚Üí 'available', 'booked', 'blocked', 'tentative'
- location (VARCHAR) ‚Üí Pickup/lesson location
- notes (TEXT)
```

### **2Ô∏è‚É£ Time Tracking System**
```sql
instructor_time_logs (Comprehensive Time Tracking):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- log_date (DATE)
- activity_type (ENUM) ‚Üí 'lesson', 'admin', 'travel', 'marketing', 'training'
- start_time (TIMESTAMP)
- end_time (TIMESTAMP)
- duration_minutes (INTEGER) ‚Üí Auto-calculated
- booking_id (FK) ‚Üí bookings (if lesson-related)
- student_id (FK) ‚Üí students (if applicable)
- location_from (VARCHAR) ‚Üí Starting location
- location_to (VARCHAR) ‚Üí Ending location
- mileage (DECIMAL) ‚Üí For expense tracking
- fuel_cost (DECIMAL) ‚Üí Travel expenses
- activity_description (TEXT)
- billable_time (INTEGER) ‚Üí Actual teaching time
- break_time (INTEGER) ‚Üí Rest periods during activity
- is_verified (BOOLEAN) ‚Üí Confirmed by system/student

instructor_daily_summaries (Daily Analytics):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- summary_date (DATE)
- total_lessons (INTEGER)
- total_teaching_hours (DECIMAL)
- total_travel_time (INTEGER) ‚Üí Minutes
- total_admin_time (INTEGER) ‚Üí Minutes
- total_earnings (DECIMAL) ‚Üí ¬£ for the day
- total_mileage (DECIMAL)
- total_fuel_cost (DECIMAL)
- lessons_completed (INTEGER)
- lessons_cancelled (INTEGER)
- no_shows (INTEGER)
- student_satisfaction_avg (DECIMAL) ‚Üí Average rating for day
- notes (TEXT) ‚Üí End of day notes

instructor_working_patterns (Pattern Analysis):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- pattern_period (ENUM) ‚Üí 'weekly', 'monthly', 'quarterly'
- period_start (DATE)
- period_end (DATE)
- average_hours_per_day (DECIMAL)
- busiest_day_of_week (VARCHAR)
- busiest_time_of_day (TIME)
- peak_season_months (JSON) ‚Üí Array of busy months
- preferred_lesson_duration (INTEGER) ‚Üí Most common lesson length
- travel_efficiency_score (DECIMAL) ‚Üí Mileage vs earnings ratio
- student_retention_rate (DECIMAL) ‚Üí Percentage
- cancellation_rate (DECIMAL) ‚Üí Percentage
```

---

## üß™ ENHANCED UK DVSA THEORY TESTING SYSTEM

### **Theory Questions with UK Specifics**
```sql
uk_theory_questions (Official DVSA Question Bank):
- id (PK)
- category_id (FK) ‚Üí theory_categories
- question_text (TEXT)
- question_image (VARCHAR) ‚Üí UK road signs, scenarios
- question_video (VARCHAR) ‚Üí Hazard perception clips
- question_type (ENUM) ‚Üí 'multiple_choice', 'hazard_perception', 'case_study'
- uk_specific_context (BOOLEAN) ‚Üí UK laws/rules specific
- difficulty_level (ENUM) ‚Üí 'foundation', 'intermediate', 'advanced'
- dvsa_reference_code (VARCHAR) ‚Üí Official DVSA reference
- highway_code_reference (VARCHAR) ‚Üí Rule numbers
- last_updated (DATE) ‚Üí For keeping current with law changes
- pass_rate_percentage (DECIMAL) ‚Üí Historical success rate
- common_wrong_answers (JSON) ‚Üí Most selected incorrect options
- explanation_text (TEXT) ‚Üí Why the answer is correct
- related_topics (JSON) ‚Üí Connected subject areas
- scenario_location (VARCHAR) ‚Üí 'urban', 'rural', 'motorway', 'residential'

hazard_perception_videos (UK Driving Scenarios):
- id (PK)
- video_file_path (VARCHAR)
- scenario_type (ENUM) ‚Üí 'urban', 'rural', 'motorway', 'residential', 'weather'
- hazard_count (INTEGER) ‚Üí Number of hazards in clip
- passing_score_min (INTEGER) ‚Üí Minimum points to pass
- passing_score_max (INTEGER) ‚Üí Maximum points possible
- duration_seconds (INTEGER)
- location_description (VARCHAR) ‚Üí Where scenario takes place
- weather_conditions (VARCHAR) ‚Üí 'clear', 'rain', 'fog', 'snow'
- time_of_day (VARCHAR) ‚Üí 'morning', 'afternoon', 'evening', 'night'
- traffic_density (VARCHAR) ‚Üí 'light', 'moderate', 'heavy'
- key_hazards (JSON) ‚Üí Description of main hazards to spot

hazard_perception_responses (Student Interactions):
- id (PK)
- test_id (FK) ‚Üí mock_tests
- video_id (FK) ‚Üí hazard_perception_videos
- student_id (FK) ‚Üí students
- click_timestamps (JSON) ‚Üí Array of when student clicked
- score (INTEGER) ‚Üí Points achieved for this clip
- max_possible_score (INTEGER)
- hazards_identified (INTEGER) ‚Üí How many hazards spotted
- false_clicks (INTEGER) ‚Üí Incorrect clicks
- response_pattern (VARCHAR) ‚Üí 'early', 'perfect', 'late', 'missed'
```

### **Active Driving Simulator Integration**
```sql
simulator_sessions (Virtual Driving Practice):
- id (PK)
- student_id (FK) ‚Üí students
- instructor_id (FK) ‚Üí instructors (if supervised)
- scenario_id (FK) ‚Üí simulator_scenarios
- session_start (TIMESTAMP)
- session_end (TIMESTAMP)
- total_duration (INTEGER) ‚Üí Minutes
- session_type (ENUM) ‚Üí 'practice', 'assessment', 'lesson'
- weather_simulation (VARCHAR) ‚Üí Applied weather conditions
- traffic_density (VARCHAR) ‚Üí Simulated traffic level
- completion_percentage (DECIMAL) ‚Üí How much of scenario completed
- overall_score (INTEGER) ‚Üí 0-100 performance score
- safety_violations (INTEGER) ‚Üí Number of rule breaks
- collision_count (INTEGER) ‚Üí Virtual accidents
- speed_violations (INTEGER) ‚Üí Times over speed limit
- signal_violations (INTEGER) ‚Üí Missed indicators/signals
- positioning_score (INTEGER) ‚Üí Lane discipline, parking
- observation_score (INTEGER) ‚Üí Mirror checks, hazard awareness
- vehicle_control_score (INTEGER) ‚Üí Smooth operation
- decision_making_score (INTEGER) ‚Üí Appropriate responses
- confidence_level (ENUM) ‚Üí 'nervous', 'cautious', 'confident', 'overconfident'
- areas_for_improvement (JSON) ‚Üí Specific skills to work on
- session_notes (TEXT) ‚Üí Instructor/system feedback

simulator_scenarios (UK Driving Situations):
- id (PK)
- scenario_name (VARCHAR)
- scenario_category (ENUM) ‚Üí 'urban', 'rural', 'motorway', 'test_routes'
- difficulty_level (ENUM) ‚Üí 'beginner', 'intermediate', 'advanced', 'test_standard'
- estimated_duration (INTEGER) ‚Üí Expected minutes to complete
- uk_location_type (VARCHAR) ‚Üí 'city_center', 'suburb', 'village', 'industrial'
- road_types_included (JSON) ‚Üí Types of roads in scenario
- traffic_situations (JSON) ‚Üí Roundabouts, traffic lights, pedestrian crossings
- weather_options (JSON) ‚Üí Available weather conditions
- time_of_day_options (JSON) ‚Üí Dawn, day, dusk, night options
- key_learning_objectives (JSON) ‚Üí Skills this scenario teaches
- prerequisite_skills (JSON) ‚Üí What student should know first
- success_criteria (JSON) ‚Üí How success is measured
- common_mistakes (JSON) ‚Üí Typical errors students make
- real_world_equivalent (VARCHAR) ‚Üí Actual UK locations this represents
```

---

## üéØ UK POSTCODE & LOCATION SYSTEM

### **UK Geographic Coverage**
```sql
uk_postcodes (UK Address System):
- id (PK)
- postcode (VARCHAR) ‚Üí Full UK postcode
- postcode_area (VARCHAR) ‚Üí First part (e.g., 'M', 'B', 'SW')
- postcode_district (VARCHAR) ‚Üí First part + digit (e.g., 'M1', 'B15')
- city (VARCHAR) ‚Üí Major city/town
- county (VARCHAR) ‚Üí Administrative county
- region (VARCHAR) ‚Üí 'North West', 'West Midlands', 'London', etc.
- latitude (DECIMAL)
- longitude (DECIMAL)
- is_urban (BOOLEAN)
- population_density (VARCHAR) ‚Üí 'low', 'medium', 'high'
- driving_difficulty (ENUM) ‚Üí 'easy', 'moderate', 'challenging'
- test_center_nearby (BOOLEAN) ‚Üí DVSA test center in area

instructor_coverage_areas (Service Areas):
- id (PK)
- instructor_id (FK) ‚Üí instructors
- postcode_id (FK) ‚Üí uk_postcodes
- travel_time_minutes (INTEGER) ‚Üí Time to reach from base
- travel_cost (DECIMAL) ‚Üí Additional charge if any
- priority_area (BOOLEAN) ‚Üí Preferred coverage zone
- last_lesson_date (DATE) ‚Üí When last taught in this area
- lesson_count (INTEGER) ‚Üí Total lessons given in area
```

---

## üìö STUDY REMINDER & TEST READINESS SYSTEM

### **Study Reminder Engine**
```sql
study_reminders (Personalized Study Alerts):
- id (PK)
- student_id (FK) ‚Üí students
- reminder_type (ENUM) ‚Üí 'daily_practice', 'weak_area_focus', 'test_countdown', 'streak_motivation'
- category_id (FK) ‚Üí theory_categories (specific topic)
- reminder_frequency (ENUM) ‚Üí 'daily', 'every_2_days', 'weekly', 'custom'
- custom_schedule (JSON) ‚Üí Custom timing pattern
- time_of_day (TIME) ‚Üí Preferred study time
- days_of_week (JSON) ‚Üí ['monday', 'tuesday', etc.]
- is_active (BOOLEAN)
- last_sent (TIMESTAMP)
- next_due (TIMESTAMP)
- success_count (INTEGER) ‚Üí Times student responded positively
- skip_count (INTEGER) ‚Üí Times student dismissed
- effectiveness_score (DECIMAL) ‚Üí How well this reminder works
- personalized_message (TEXT) ‚Üí Custom message for student
- created_at, updated_at

student_study_streaks (Motivation Tracking):
- id (PK)
- student_id (FK) ‚Üí students
- current_streak_days (INTEGER) ‚Üí Consecutive study days
- longest_streak_days (INTEGER) ‚Üí Personal best
- last_study_date (DATE)
- streak_start_date (DATE)
- total_study_sessions (INTEGER) ‚Üí All-time count
- average_session_minutes (INTEGER)
- streak_rewards_earned (JSON) ‚Üí Achievements unlocked
- streak_broken_count (INTEGER) ‚Üí Times streak was lost
- motivation_level (ENUM) ‚Üí 'low', 'medium', 'high', 'excellent'

study_session_analytics (Learning Pattern Analysis):
- id (PK)
- student_id (FK) ‚Üí students
- session_date (DATE)
- session_start (TIMESTAMP)
- session_end (TIMESTAMP)
- total_minutes (INTEGER)
- questions_attempted (INTEGER)
- questions_correct (INTEGER)
- categories_studied (JSON) ‚Üí Topics covered in session
- improvement_rate (DECIMAL) ‚Üí Progress during session
- focus_score (INTEGER) ‚Üí How concentrated the study was
- break_count (INTEGER) ‚Üí Rest periods taken
- difficulty_preference (VARCHAR) ‚Üí What level they chose
- study_method (ENUM) ‚Üí 'random', 'category_focus', 'weak_areas', 'mock_test'
- session_quality (ENUM) ‚Üí 'poor', 'average', 'good', 'excellent'
- notes (TEXT) ‚Üí Student's session notes
```

### **Test Readiness Calculator**
```sql
test_readiness_assessments (AI-Powered Readiness Analysis):
- id (PK)
- student_id (FK) ‚Üí students
- assessment_date (DATE)
- overall_readiness_score (INTEGER) ‚Üí 0-100 percentage
- theory_knowledge_score (INTEGER) ‚Üí Multiple choice readiness
- hazard_perception_score (INTEGER) ‚Üí HP test readiness
- confidence_level (ENUM) ‚Üí 'not_ready', 'needs_work', 'nearly_ready', 'test_ready'
- estimated_pass_probability (DECIMAL) ‚Üí AI prediction
- recommended_study_hours (INTEGER) ‚Üí Hours needed before test
- weak_categories (JSON) ‚Üí Topics needing attention
- strong_categories (JSON) ‚Üí Mastered topics
- study_consistency_score (INTEGER) ‚Üí How regular their study is
- mock_test_performance (DECIMAL) ‚Üí Average mock test scores
- improvement_trend (VARCHAR) ‚Üí 'declining', 'stable', 'improving', 'excellent'
- last_assessment_score (INTEGER) ‚Üí Previous readiness score
- days_since_last_study (INTEGER) ‚Üí Study recency
- total_practice_hours (INTEGER) ‚Üí Cumulative study time
- recommendation_priority (JSON) ‚Üí Ordered list of focus areas
- test_booking_recommendation (ENUM) ‚Üí 'not_yet', 'consider_booking', 'ready_to_book', 'book_now'
- custom_study_plan (JSON) ‚Üí Personalized preparation plan

readiness_factors (Detailed Analysis Components):
- id (PK)
- assessment_id (FK) ‚Üí test_readiness_assessments
- factor_name (VARCHAR) ‚Üí 'knowledge_breadth', 'speed_accuracy', 'hazard_timing'
- factor_score (INTEGER) ‚Üí 0-100 for this specific factor
- weight_percentage (DECIMAL) ‚Üí How much this affects overall score
- improvement_potential (VARCHAR) ‚Üí 'low', 'medium', 'high'
- specific_recommendations (TEXT) ‚Üí Detailed advice for this factor
- benchmark_comparison (VARCHAR) ‚Üí How they compare to successful students
```

### **Suggestion Board System**
```sql
suggestion_board (Community Learning Hub):
- id (PK)
- suggestion_type (ENUM) ‚Üí 'study_tip', 'test_experience', 'instructor_review', 'app_improvement'
- title (VARCHAR) ‚Üí Clear suggestion title
- content (TEXT) ‚Üí Detailed suggestion content
- author_id (FK) ‚Üí users (can be anonymous)
- author_type (ENUM) ‚Üí 'student', 'instructor', 'admin', 'anonymous'
- category_tags (JSON) ‚Üí Relevant theory categories
- is_anonymous (BOOLEAN) ‚Üí Hide author identity
- upvotes (INTEGER) ‚Üí Community approval count
- downvotes (INTEGER) ‚Üí Community disapproval count
- helpful_count (INTEGER) ‚Üí "Helpful" reactions
- view_count (INTEGER) ‚Üí How many times viewed
- status (ENUM) ‚Üí 'pending', 'approved', 'featured', 'archived'
- moderator_notes (TEXT) ‚Üí Admin feedback
- implementation_status (ENUM) ‚Üí 'suggested', 'under_review', 'planned', 'implemented'
- priority_level (INTEGER) ‚Üí 1-5 importance ranking
- created_at, updated_at

suggestion_interactions (Community Engagement):
- id (PK)
- suggestion_id (FK) ‚Üí suggestion_board
- user_id (FK) ‚Üí users
- interaction_type (ENUM) ‚Üí 'upvote', 'downvote', 'helpful', 'bookmark', 'report'
- comment (TEXT) ‚Üí Optional feedback
- created_at

suggestion_comments (Discussion Threads):
- id (PK)
- suggestion_id (FK) ‚Üí suggestion_board
- author_id (FK) ‚Üí users
- parent_comment_id (FK) ‚Üí suggestion_comments (for replies)
- comment_text (TEXT)
- is_anonymous (BOOLEAN)
- upvotes (INTEGER)
- is_moderator_response (BOOLEAN)
- is_featured (BOOLEAN) ‚Üí Highlighted by moderators
- created_at, updated_at
```

---

## üö® EMERGENCY LESSON CANCELLATION & AUTO-REBOOKING

### **Emergency Cancellation System**
```sql
emergency_cancellations (Crisis Management):
- id (PK)
- booking_id (FK) ‚Üí bookings
- cancellation_reason (ENUM) ‚Üí 'instructor_sick', 'student_emergency', 'vehicle_breakdown', 'weather', 'traffic_accident', 'family_emergency', 'covid_symptoms'
- cancelled_by (FK) ‚Üí users (who cancelled)
- cancellation_time (TIMESTAMP)
- original_lesson_datetime (TIMESTAMP)
- notice_period_hours (INTEGER) ‚Üí How much advance notice
- severity_level (ENUM) ‚Üí 'minor', 'moderate', 'major', 'critical'
- auto_rebook_eligible (BOOLEAN) ‚Üí Can system auto-rebook?
- student_notified (BOOLEAN)
- instructor_notified (BOOLEAN)
- admin_notified (BOOLEAN)
- compensation_required (BOOLEAN) ‚Üí Student deserves credit/refund
- alternative_options_provided (JSON) ‚Üí Other time slots offered
- cancellation_notes (TEXT) ‚Üí Detailed explanation
- resolution_status (ENUM) ‚Üí 'pending', 'rebooking_in_progress', 'resolved', 'escalated'

auto_rebooking_queue (Intelligent Rescheduling):
- id (PK)
- cancellation_id (FK) ‚Üí emergency_cancellations
- student_id (FK) ‚Üí students
- instructor_id (FK) ‚Üí instructors
- original_datetime (TIMESTAMP)
- priority_score (INTEGER) ‚Üí Booking priority (1-100)
- student_preferences (JSON) ‚Üí Preferred times/days
- instructor_availability (JSON) ‚Üí Available slots
- earliest_acceptable_date (DATE) ‚Üí Student's minimum date
- latest_acceptable_date (DATE) ‚Üí Student's maximum date
- preferred_time_ranges (JSON) ‚Üí Morning, afternoon, evening preferences
- auto_confirm_enabled (BOOLEAN) ‚Üí Skip student confirmation
- rebooking_attempts (INTEGER) ‚Üí How many times system tried
- last_attempt_time (TIMESTAMP)
- success_probability (DECIMAL) ‚Üí AI prediction of successful rebooking
- alternative_instructors (JSON) ‚Üí Backup instructor options
- status (ENUM) ‚Üí 'queued', 'processing', 'options_found', 'confirmed', 'failed'

rebooking_notifications (Communication Management):
- id (PK)
- rebooking_id (FK) ‚Üí auto_rebooking_queue
- notification_type (ENUM) ‚Üí 'cancellation_alert', 'options_available', 'booking_confirmed', 'manual_action_needed'
- recipient_id (FK) ‚Üí users
- recipient_type (ENUM) ‚Üí 'student', 'instructor', 'admin'
- channel (ENUM) ‚Üí 'email', 'sms', 'whatsapp', 'push', 'in_app'
- message_content (TEXT)
- sent_at (TIMESTAMP)
- read_at (TIMESTAMP)
- response_required (BOOLEAN)
- response_deadline (TIMESTAMP)
- response_received (TEXT) ‚Üí User's reply
```

---

## üí¨ GROUP CHAT FOR THEORY TEST STUDENTS

### **Theory Student Group Chats**
```sql
theory_study_groups (Learning Communities):
- id (PK)
- group_name (VARCHAR) ‚Üí "March 2024 Test Takers"
- group_type (ENUM) ‚Üí 'test_date_cohort', 'topic_focus', 'study_buddies', 'mock_test_group'
- target_test_date (DATE) ‚Üí When group members plan to take test
- focus_categories (JSON) ‚Üí Theory topics this group studies
- max_members (INTEGER) ‚Üí Group size limit
- current_member_count (INTEGER)
- is_private (BOOLEAN) ‚Üí Invitation only
- requires_approval (BOOLEAN) ‚Üí Admin approval for joining
- study_schedule (JSON) ‚Üí Group study times
- group_leader_id (FK) ‚Üí users (optional group leader)
- moderator_ids (JSON) ‚Üí Users with moderation rights
- group_description (TEXT) ‚Üí Purpose and rules
- activity_level (ENUM) ‚Üí 'inactive', 'low', 'moderate', 'high', 'very_active'
- success_rate (DECIMAL) ‚Üí Percentage of members who passed
- created_at, updated_at

theory_group_memberships (Group Participation):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- student_id (FK) ‚Üí students
- joined_at (TIMESTAMP)
- role (ENUM) ‚Üí 'member', 'moderator', 'leader'
- is_active (BOOLEAN)
- last_activity (TIMESTAMP)
- messages_sent (INTEGER)
- helpful_responses (INTEGER) ‚Üí Messages marked as helpful
- study_contributions (INTEGER) ‚Üí Shared resources, tips
- group_reputation_score (INTEGER) ‚Üí Community standing
- notification_preferences (JSON) ‚Üí When to get alerts
- left_at (TIMESTAMP) ‚Üí If they left the group

group_chat_messages (Real-time Communication):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- sender_id (FK) ‚Üí users
- message_type (ENUM) ‚Üí 'text', 'image', 'file', 'study_resource', 'mock_test_share', 'voice_note'
- message_content (TEXT)
- attachment_url (VARCHAR) ‚Üí File/image path
- reply_to_message_id (FK) ‚Üí group_chat_messages (threaded replies)
- is_pinned (BOOLEAN) ‚Üí Important message
- is_study_tip (BOOLEAN) ‚Üí Educational content
- category_tags (JSON) ‚Üí Relevant theory topics
- reactions (JSON) ‚Üí Emoji reactions from members
- mentions (JSON) ‚Üí @username mentions
- is_moderated (BOOLEAN) ‚Üí Checked by moderator
- edited_at (TIMESTAMP)
- deleted_at (TIMESTAMP)
- sent_at (TIMESTAMP)

group_study_sessions (Collaborative Learning):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- session_name (VARCHAR) ‚Üí "Hazard Perception Practice"
- session_type (ENUM) ‚Üí 'group_mock_test', 'topic_discussion', 'study_party', 'q_and_a'
- scheduled_start (TIMESTAMP)
- scheduled_end (TIMESTAMP)
- actual_start (TIMESTAMP)
- actual_end (TIMESTAMP)
- organizer_id (FK) ‚Üí users
- max_participants (INTEGER)
- current_participants (JSON) ‚Üí Array of user IDs
- session_description (TEXT) ‚Üí What the session covers
- study_materials (JSON) ‚Üí Resources used in session
- session_notes (TEXT) ‚Üí Key points discussed
- recording_url (VARCHAR) ‚Üí If session was recorded
- follow_up_actions (JSON) ‚Üí What to do after session
- effectiveness_rating (DECIMAL) ‚Üí Participant feedback average

group_achievements (Collective Milestones):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- achievement_type (ENUM) ‚Üí 'first_pass', 'group_streak', 'study_milestone', 'helping_community'
- achievement_name (VARCHAR) ‚Üí "5 Members Passed This Month"
- description (TEXT)
- earned_at (TIMESTAMP)
- participant_ids (JSON) ‚Üí Members who contributed
- celebration_message (TEXT) ‚Üí Congratulatory message
- badge_icon (VARCHAR) ‚Üí Visual representation
```

### **Advanced Group Features**
```sql
group_study_resources (Shared Learning Materials):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- uploader_id (FK) ‚Üí users
- resource_type (ENUM) ‚Üí 'pdf_guide', 'video_explanation', 'practice_questions', 'mnemonics', 'real_test_experience'
- resource_title (VARCHAR)
- resource_description (TEXT)
- file_url (VARCHAR)
- file_size (INTEGER) ‚Üí In bytes
- download_count (INTEGER)
- helpful_votes (INTEGER)
- category_tags (JSON) ‚Üí Theory topics covered
- difficulty_level (ENUM) ‚Üí 'beginner', 'intermediate', 'advanced'
- is_verified (BOOLEAN) ‚Üí Checked for accuracy
- moderator_approved (BOOLEAN)
- upload_date (TIMESTAMP)

group_leaderboards (Friendly Competition):
- id (PK)
- group_id (FK) ‚Üí theory_study_groups
- leaderboard_type (ENUM) ‚Üí 'study_streak', 'mock_test_scores', 'helpful_contributions', 'overall_progress'
- period (ENUM) ‚Üí 'weekly', 'monthly', 'all_time'
- rankings (JSON) ‚Üí Ordered list of member rankings
- last_updated (TIMESTAMP)
- is_active (BOOLEAN)
```

---

## üéØ UPDATED COMPREHENSIVE FEATURES

This enhanced UK-specific database design now includes:

1. ‚úÖ **Enhanced UK Instructor Database** with all requested fields
2. ‚úÖ **Complete DVSA Theory Test Topics** (all 15 official categories)  
3. ‚úÖ **Comprehensive Calendar & Diary System** for instructors
4. ‚úÖ **Detailed Time Tracking** with analytics
5. ‚úÖ **Active Driving Simulator** integration
6. ‚úÖ **UK Postcode System** for location management
7. ‚úÖ **Hazard Perception Testing** with video scenarios
8. ‚úÖ **üÜï Study Reminder Engine** with personalized alerts
9. ‚úÖ **üÜï AI Test Readiness Calculator** with pass probability
10. ‚úÖ **üÜï Community Suggestion Board** with voting system
11. ‚úÖ **üÜï Emergency Cancellation System** with auto-rebooking
12. ‚úÖ **üÜï Theory Student Group Chats** with collaborative features

**üöÄ Ready to implement this comprehensive UK driving platform?** üá¨üáß